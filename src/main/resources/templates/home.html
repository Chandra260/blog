<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <link rel="stylesheet" href="../static/home.css" type="text/css" th:href="@{/home.css}">
    <title>Home Page</title>
</head>
<body>
<header>
    <div>
        <span><img src="../static/logo.png" alt="blog-image"></span>
        <span class="header">Blog Application</span>
        <nav style="text-align: right;">

            <p><i>Logged in as:</i></p>
            <span sec:authentication="name"></span>
<!--            <form action="{user-profile}">-->
<!--                <a th:href="@{/comment.email}"><span th:text="'[' + ${comment.email} + ']'" >email</span></a>-->
            <span sec:authentication="authorities"></span>

        </nav>
    </div>
    <br>

    <span><a class="headings" href="home.html" th:href="@{/}">Home</a></span>
    <span sec:authorize="isAuthenticated()"><a class="headings" th:href="@{/user/create-post}">Create Post</a></span>
    <span sec:authorize="isAuthenticated()"><a class="headings" th:href="@{/user/publish-post}">Saved Post</a></span>
    <span sec:authorize="hasRole('USER')"><a class="headings" th:href="@{/user/my-post}">My Posts</a></span>
    <span sec:authorize="isAnonymous()"><a class="headings" th:href="@{/login}">Login</a></span>
    <span sec:authorize="isAnonymous()"><a class="headings" th:href="@{/register}">Register</a></span>
    <span sec:authorize="isAuthenticated()"><a class="headings" th:href="@{/logout}">Logout</a></span>
</header>
<br>

<!--h2>Welcome</h2>-->
<!--<p>Spring Security Thymeleaf tutorial</p>-->
<!--<div sec:authorize="hasRole('USER')">Text visible to user.</div>-->
<!--<div sec:authorize="hasRole('ADMIN')">Text visible to admin.</div>-->
<!--<div sec:authorize="isAuthenticated()">-->
<!--    Text visible only to authenticated users.-->
<!--</div>-->

<nav><form action="sort" method="GET">
    <input type="submit" value="sortBy DateTime">
</form></nav><br>

<nav>
    <form action="search-post" method="POST">
        <input type="text" placeholder="search by author, content, time, tags" name="search">
        <input class="button" type="submit" value="Search..">
    </form>
</nav>
<br>

<form action="filter">
    Author:
    <div th:each="author : ${authors}">
        <input type="checkbox" th:value="${author}" name="author"><span th:text="${author}"></span>
    </div>
    Tags:
    <div th:each="tagName : ${tags}">
        <input type="checkbox" th:value="${tagName}" name="tags"><span th:text="${tagName}"></span>
    </div>
    PublishedDateTime:
    <div th:each="post : ${posts}">
        <input type="checkbox" th:value="${post.publishedAt}" name="dateTime"><span th:text="${post.publishedAt}"></span>
    </div>
    <input class="button" type="submit" value="filter">
</form>
<br>

<!--            <h1 th:text="${test}"></h1>-->
<span th:each="post : ${posts}"></span>
<article>
    <div class="posts" th:each="post : ${posts}">
        <h2 th:text="${post.title}">Post Title</h2>
        <i>Posted on</i>
        <span th:text="${post.publishedAt}">12-Dec-2020</span><br>
        <!--        <div th:text="${#dates.format(post.publishedAt, 'dd-MMMM-yyyy')}">dateFormat</div>-->
        <p>Author: <span th:text="${post.author}"></span><p>
        <p>Tags: <span th:text="${post.tags}"></span></p>
        <p><span th:text="${post.excerpt}"></span>..</p>

        <form action="view-post" method="POST">
            <input type="hidden" th:value="${post.id}" name="postId">
            <input type="submit" value="Read more..">
        </form>
    </div>
</article>

<!--Pagination-->
<!--    <div>-->
<!--        <ul>-->
<!--            <span><a href="#">Previous</a></span>-->
<!--            <span><a href="/0">1</a></span>-->
<!--            <span><a href="/1">2</a></span>-->
<!--            <span><a href="/2">3</a></span>-->
<!--            </span><a href="#">Next</a></span>-->
<!--        </ul>-->
<!--    </div>-->


</body>
</html>
